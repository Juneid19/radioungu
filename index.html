<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>iframe tester</title>
    <link rel="stylesheet" href="https://public.codepenassets.com/css/reset-2.0.min.css">


  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<title>MEKARINDAH MINI - Deep Purple Vinyl</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
    :root { 
        --v-size: 160px; 
        --neon: #ff006e; 
        --neon-blue: #00f2ff;
        --ungu-tua: #1e1b4b;
        --ungu-muda: #4c1d95;
        /* WARNA VINYL DISET LEBIH TUA DIKIT */
        --vinyl-purple: #7c3aed; 
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body { 
        min-height: 100vh; display: flex; align-items: center; justify-content: center;
        background: linear-gradient(135deg, var(--ungu-tua), var(--ungu-muda), #2e1065);
        background-size: 400% 400%;
        animation: background-shift 10s ease infinite;
        font-family: 'Segoe UI', Roboto, sans-serif; color: #fff;
        overflow: hidden;
    }

    .mini-player {
        background: rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(167, 139, 250, 0.4);
        padding: 20px; border-radius: 28px;
        display: flex; gap: 20px; align-items: center;
        width: 440px; max-width: 95%;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(15px);
        position: relative;
    }

    .vinyl-box { position: relative; width: var(--v-size); height: var(--v-size); flex-shrink: 0; }
    
    .neon-glow {
        position: absolute; top: -3px; left: -3px; right: -3px; bottom: -3px;
        border-radius: 50%;
        border: 2px solid var(--neon);
        opacity: 0;
        transition: 0.5s;
    }
    .playing .neon-glow {
        opacity: 1;
        animation: neon-pulse 2s infinite ease-in-out;
    }

    /* VINYL UNGU TUA MEDIUM */
    .vinyl {
        width: 100%; height: 100%; border-radius: 50%;
        /* Gradasi dibuat lebih dalam/tua */
        background: radial-gradient(circle, #a78bfa 0%, var(--vinyl-purple) 45%, #4c1d95 100%), 
                    repeating-radial-gradient(circle, transparent 0, transparent 2px, rgba(0,0,0,0.15) 3px, transparent 4px);
        animation: spin 12s linear infinite; animation-play-state: paused;
        position: relative; z-index: 1;
        box-shadow: inset 0 0 25px rgba(0,0,0,0.3), 0 0 15px rgba(124, 58, 237, 0.3);
    }
    .cover-art {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 58%; height: 58%; border-radius: 50%; overflow: hidden; 
        border: 2px solid #fff; z-index: 2;
        background-color: #000;
    }
    .cover-art img { width: 100%; height: 100%; object-fit: cover; }

    .playing .vinyl { animation-play-state: running; }

    .info { flex: 1; min-width: 0; display: flex; flex-direction: column; }
    .station-name { font-size: 18px; font-weight: 900; color: #fff; }
    .artist { font-size: 11px; color: var(--neon-blue); font-weight: 700; text-transform: uppercase; margin-top: 5px; }
    .title-wrap { width: 100%; overflow: hidden; white-space: nowrap; margin-bottom: 12px; }
    .title { font-size: 14px; font-weight: 400; display: inline-block; color: #f1f5f9; }
    .marquee { animation: marquee 12s linear infinite; padding-left: 100%; }

    .controls { display: flex; align-items: center; gap: 15px; }
    .btn-play {
        width: 46px; height: 46px; border-radius: 50%; border: none;
        background: linear-gradient(135deg, var(--neon), #7c3aed); color: #fff; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
    }
    .play-icon { width: 0; height: 0; border-style: solid; border-width: 8px 0 8px 14px; border-color: transparent transparent transparent #fff; margin-left: 4px; }
    .pause-icon { width: 12px; height: 16px; border-left: 4px solid #fff; border-right: 4px solid #fff; }
    
    .live-dot { width: 8px; height: 8px; background: #ef4444; border-radius: 50%; animation: blink 1s infinite; }

    @keyframes background-shift { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
    @keyframes neon-pulse { 0%, 100% { transform: scale(1); box-shadow: 0 0 15px var(--neon); } 50% { transform: scale(1.06); box-shadow: 0 0 30px var(--neon); } }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.2; } }
    
    @media (max-width: 450px) { .mini-player { flex-direction: column; text-align: center; } .info { align-items: center; } }

  .credit {
  position: fixed;
  bottom: 10px;
  right: 10px;
  font-size: 12px;
  font-style: italic;
  color: rgba(255,255,255,0.6);
  z-index: 999;
  pointer-events: none; /* supaya tidak mengganggu klik */
}
                   
</style>
</head>
<body>

<div class="mini-player" id="player">
    <div class="vinyl-box">
        <div class="neon-glow"></div>
        <div class="vinyl"></div>
        <div class="cover-art">
            <img id="cover" src="https://mekarindah.netlify.app/img/default.jpg">
        </div>
    </div>
    <div class="info">
        <div class="station-name">SUARA MEKARINDAH</div>
        <div class="artist" id="artist">Connecting...</div>
        <div class="title-wrap"><div class="title" id="title">Streaming Mode</div></div>
        <div class="controls">
            <button class="btn-play" id="playBtn"><div id="icon" class="play-icon"></div></button>
            <div style="display:flex; align-items:center; gap:6px; font-size:10px; font-weight:bold; color:#ef4444;">
                <div class="live-dot"></div> LIVE STREAM
            </div>
        </div>
    </div>
    <audio id="audio" src="https://stream.zeno.fm/d2k0ptw4kkeuv" crossorigin="anonymous"></audio>
</div>
  <div class="credit">prepared by Juneid</div>

<script>
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('playBtn');
    const icon = document.getElementById('icon');
    const player = document.getElementById('player');
    const titleEl = document.getElementById('title');
    const artistEl = document.getElementById('artist');
    const coverEl = document.getElementById('cover');
    const defaultCover = "https://mekarindah.netlify.app/img/default.jpg";

    const RECITER_COVERS = {
            'mishary': 'https://i.ytimg.com/vi/GLMp_EGGLfk/hq720.jpg?sqp=-oaymwExCK4FEIIDSFryq4qpAyMIARUAAIhCGAHwAQH4AdQGgALgA4oCDAgAEAEYciBWKDgwDw==&rs=AOn4CLAa_DZgLB8D4xcMTFPgxpnQghg_sw',
            'abdul': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT99qAcwhSDEUMmxHHzjEfna9YVgtg-04A8rDvXbaNtZf-70ZkRxFPl_i5J_he-DnfdtO7EhS0ouUaiu-hq_bE8Ni9U3xKBjsAdFgzAg4w&s=10',
            'adi hidayat': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQi7cw0cL0cs4aqyXA5sbBMBaCWGmW0D28pzruJKEWXlx9RYeQLuZouy9VlqLk9oWvOxlO7jHAh6QOXhjPyKPQZqz2rez4YV5XOPrgTTQ&s=10',
            'zainuddin': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSDo4WarU6dxMHRx3BFqisexu4euGqv9Ni9_JZA5jZBwA&s=10',
            'latif': 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQSgeut2z_VzZzl5_B7sbcdxL2FkG3Rd3dOTaS3WCOXEA&s=10',
            'al sudais': 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Abdulrahman_Al-Sudais.jpg/440px-Abdulrahman_Al-Sudais.jpg',
            'ghamdi': 'https://i.ibb.co/Wp0y1hG/ghamdi.jpg',
            'shatri': 'https://i.ibb.co/fQ5N204/shatri.jpg',
            'abdul basit': 'https://i.ibb.co/RzM805h/abdulbasit.jpg' 
    };

    playBtn.onclick = () => {
        if (audio.paused) {
            audio.play();
            icon.className = 'pause-icon';
            player.classList.add('playing');
        } else {
            audio.pause();
            icon.className = 'play-icon';
            player.classList.remove('playing');
        }
    };

    function updateUI(artist, title) {
        artistEl.innerText = artist.toUpperCase();
        titleEl.innerText = title;
        titleEl.classList.remove('marquee');
        if (titleEl.scrollWidth > titleEl.parentElement.offsetWidth) {
            titleEl.classList.add('marquee');
        }
        
        let fullString = (artist + " " + title).toLowerCase();
        let foundManual = false;

        for (let key in RECITER_COVERS) {
            if (fullString.includes(key)) {
                coverEl.src = RECITER_COVERS[key];
                foundManual = true;
                break;
            }
        }

        if (!foundManual) {
            fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(artist + " " + title)}&entity=song&limit=1`)
                .then(res => res.json())
                .then(data => {
                    if (data.results && data.results.length > 0) {
                        coverEl.src = data.results[0].artworkUrl600 || data.results[0].artworkUrl100.replace('100x100', '600x600');
                    } else {
                        coverEl.src = defaultCover;
                    }
                })
                .catch(() => coverEl.src = defaultCover);
        }
    }

    async function getZenoMetadata() {
        try {
            const response = await fetch('https://api.zeno.fm/mounts/metadata/subscribe/gkvbmtw4kkeuv');
            const reader = response.body.getReader();
            while (true) {
                const { value, done } = await reader.read();
                if (done) break;
                const str = new TextDecoder().decode(value);
                const match = str.match(/'streamTitle'\s*:\s*'([^']*)'/) || str.match(/"streamTitle"\s*:\s*"([^"]*)"/);
                if (match && match[1]) {
                    const fullTitle = match[1];
                    const parts = fullTitle.split(' - ');
                    updateUI((parts[0] || "Mekarindah").trim(), (parts[1] || "Live Stream").trim());
                }
            }
        } catch (e) {
            setTimeout(getZenoMetadata, 3000);
        }
    }
    getZenoMetadata();
</script>
</body>
</html>
    
  </body>
  
</html>
